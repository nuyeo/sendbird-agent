from langchain.tools import tool


# @tool ë°ì½”ë ˆì´í„°ë¥¼ ë¶™ì´ë©´ AIê°€ ì´ í•¨ìˆ˜ì˜ ì¡´ì¬ë¥¼ ì•Œê²Œ ë©ë‹ˆë‹¤.
@tool
def search_order_status(order_id: str) -> str:
    """
    ì£¼ë¬¸ ë²ˆí˜¸(order_id)ë¥¼ ë°›ì•„ì„œ í˜„ì¬ ë°°ì†¡ ìƒíƒœë¥¼ ì¡°íšŒí•©ë‹ˆë‹¤.
    ì‚¬ìš©ìê°€ 'ë‚´ ì£¼ë¬¸ ì¡°íšŒí•´ì¤˜', 'ë°°ì†¡ ì–´ë””ì¯¤ ì™”ì–´?'ë¼ê³  ë¬¼ì„ ë•Œ ì‚¬ìš©í•©ë‹ˆë‹¤.
    """
    print(f"ğŸšš [Tool ì‹¤í–‰] ì£¼ë¬¸ ì¡°íšŒ í•¨ìˆ˜ê°€ í˜¸ì¶œë˜ì—ˆìŠµë‹ˆë‹¤! ID: {order_id}")

    # ì‹¤ì œë¡œëŠ” DBë¥¼ ì¡°íšŒí•´ì•¼ í•˜ì§€ë§Œ, ì—¬ê¸°ì„œëŠ” ê°€ì§œ ë°ì´í„°ë¥¼ ë¦¬í„´í•©ë‹ˆë‹¤.
    mock_db = {
        "A101": "ë°°ì†¡ ì™„ë£Œ (ë¬¸ ì• ë³´ê´€ ì¤‘)",
        "B202": "ë°°ì†¡ ì¤‘ (ì˜¤ëŠ˜ ì˜¤í›„ ë„ì°© ì˜ˆì •)",
        "C303": "ìƒí’ˆ ì¤€ë¹„ ì¤‘ (ë‚´ì¼ ë°œì†¡)"
    }

    result = mock_db.get(order_id, "ì¡°íšŒëœ ì£¼ë¬¸ ë‚´ì—­ì´ ì—†ìŠµë‹ˆë‹¤. ì£¼ë¬¸ ë²ˆí˜¸ë¥¼ ë‹¤ì‹œ í™•ì¸í•´ì£¼ì„¸ìš”.")
    return result


@tool
def refund_calculator(price: int, days_passed: int) -> str:
    """
    ìƒí’ˆ ê°€ê²©ê³¼ êµ¬ë§¤ í›„ ê²½ê³¼ì¼(days_passed)ì„ ì…ë ¥ë°›ì•„ í™˜ë¶ˆ ì˜ˆìƒ ê¸ˆì•¡ì„ ê³„ì‚°í•©ë‹ˆë‹¤.
    """
    print(f"ğŸ’° [Tool ì‹¤í–‰] í™˜ë¶ˆ ê³„ì‚°ê¸° í˜¸ì¶œ: {price}ì›, {days_passed}ì¼ ê²½ê³¼")

    if days_passed <= 7:
        return f"ì „ì•¡ í™˜ë¶ˆ ê°€ëŠ¥í•©ë‹ˆë‹¤. ì˜ˆìƒ í™˜ë¶ˆì•¡: {price}ì›"
    elif days_passed <= 14:
        return f"90% í™˜ë¶ˆ ê°€ëŠ¥í•©ë‹ˆë‹¤. ì˜ˆìƒ í™˜ë¶ˆì•¡: {int(price * 0.9)}ì›"
    else:
        return "êµ¬ë§¤ í›„ 14ì¼ì´ ì§€ë‚˜ í™˜ë¶ˆì´ ë¶ˆê°€ëŠ¥í•©ë‹ˆë‹¤."